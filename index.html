<!DOCTYPE HTML>
<html>
<head>
  <title>Vis Experiments</title>
  <script src="libs/vis/vis.js"></script> 
  <script type="text/javascript" src="libs/require.js"></script>
  <script>
    var antlr4 = require('antlr4/index');
    var EliminationOrderLexer = require('dsl/EliminationOrderLexer');
    var EliminationOrderParser = require('dsl/EliminationOrderParser');
   	var input = "static sum(in : #ins_nl)  { in.weight * #outdeg_nl } + sum(out : #outs_nl) { out.weight * #indeg_nl } + #nloops * (#indeg_nl * #outdeg_nl)";
   	var chars = new antlr4.InputStream(input);
   	var lexer = new EliminationOrderLexer.EliminationOrderLexer(chars);
   	var tokens  = new antlr4.CommonTokenStream(lexer);
   	var parser = new EliminationOrderParser.EliminationOrderParser(tokens);
   	parser.buildParseTrees = true;
   	var tree = parser.s();
 </script>
 	<link href="libs/vis/vis.css" rel="stylesheet" type="text/css" /> 
</head>
<body>

<input type='file' accept='text/plain' onchange='openFile(event)'><br>
<img id='output'>
<div id="mynetwork" >

<script>
  var temp;
  var openFile = function(event) {
    var input = event.target;

    var reader = new FileReader();
    reader.onload = function(){
      var text = reader.result;
	  temp = reader.result.substring(0, 200);
	  
	  var container = document.getElementById('mynetwork');

	  // provide data in the DOT language
	  var DOTstring = temp;
	  var parsedData = vis.network.convertDot(DOTstring);

	  var data = {
       nodes: parsedData.nodes,
       edges: parsedData.edges
	}

	  var options = parsedData.options;

	  // you can extend the options like a normal JSON variable:
	  var options = {
		nodes:{
		color: 'grey',
		shadow: true
	}
	}
	  // create a network
	  var network = new vis.Network(container, data, options);	
    };
    reader.readAsText(input.files[0]);
  };
</script>
</div>
</body>
</html>